import app from 'app';
import Component from 'Component';
import RubUtils from 'RubUtils';
import ListItem from 'ListItem';
import ListItemToggleableRub from 'ListItemToggleableRub';

class TabTransactionHistory extends Component {
    constructor() {
        super()
        this.contentNode = {
            default: null,
            type: cc.Node
        }
    }

    onLoad() {
        // this.node.getComponent(cc.ScrollView).scrollEvents.push(event);
        let data = {
            p: 1
        };
        let sendObj = {
            cmd: "b_ath",
            data
        };

        app.service.send(sendObj, (data) => {
            console.log(data);
            // RubUtils.loadRes('dashboard/dialog/prefabs/userinfo/list_item').then((preFab) => {
            //     for (let i = 0; i < 10; i++) {
            //         const transactionItem = cc.instantiate(preFab);
            //         transactionItem.getComponent('ListItem').initWithStyle(ListItem.TYPE.STYLE1, true);
            //         const widget = transactionItem.addComponent(cc.Widget);
            //         widget.isAlignLeft = true;
            //         widget.isAlignRight = true;

            //         widget.left = 0;
            //         widget.right = 0;

            //         this.contentNode.addChild(transactionItem);
            //     }
            // });
        });
        for (let i = 0; i < 3; i++) {
            let transactionItem = new ListItemToggleableRub();

            let body = {
                title: {
                    content: '????'
                },
                subTitle: {
                    content: '????'
                },
                detail: {
                    content: '???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? ???? '
                },
            };

            transactionItem._initItem({}, body, {}, {
                group: {
                    widths: [60, '80%', 54]
                }
            });
            this.contentNode.addChild(transactionItem.node());
        }
    }


    _hide() {
        this.node.active = false;
    }
}

app.createComponent(TabTransactionHistory);